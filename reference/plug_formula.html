<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add formula terms to a tidyflow — plug_formula • tidyflow</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Add formula terms to a tidyflow — plug_formula" />
<meta property="og:description" content="

plug_formula() specifies the terms of the model through the usage of a
formula.
drop_formula() removes the formula as well as any downstream objects
that might get created after the formula is used for preprocessing, such as
terms. Additionally, if the model has already been fit, then the fit is
removed.
replace_formula() first removes the formula, then replaces the previous
formula with the new one. Any model that has already been fit based on this
formula will need to be refit.

" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-93322-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-93322-5');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tidyflow</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href=".././index.html">
    <span class="fas fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fas fa-gears"></span>
     
    Reference
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-graduation-cap"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/a01_intro_tidyflow.html">An introduction to tidyflow</a>
    </li>
    <li>
      <a href="../articles/b02_model-with-recipe.html">Using recipes in tidyflow</a>
    </li>
    <li>
      <a href="../articles/c03_fitting-model-resampling.html">Using resampling in tidyflow</a>
    </li>
    <li>
      <a href="../articles/d04_fitting-model-tuning.html">Grid search in tidyflow</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-file-powerpoint"></span>
     
    Presentations
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/berlinrug_202009.pdf">Berlin RUG September 2020</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/cimentadaj/tidyflow/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add formula terms to a tidyflow</h1>
    <small class="dont-index">Source: <a href='https://github.com/cimentadaj/tidyflow/blob/master/R/pre-action-formula.R'><code>R/pre-action-formula.R</code></a></small>
    <div class="hidden name"><code>plug_formula.Rd</code></div>
    </div>

    <div class="ref-description">
    
<ul>
<li><p><code>plug_formula()</code> specifies the terms of the model through the usage of a
formula.</p></li>
<li><p><code>drop_formula()</code> removes the formula as well as any downstream objects
that might get created after the formula is used for preprocessing, such as
terms. Additionally, if the model has already been fit, then the fit is
removed.</p></li>
<li><p><code>replace_formula()</code> first removes the formula, then replaces the previous
formula with the new one. Any model that has already been fit based on this
formula will need to be refit.</p></li>
</ul>

    </div>

    <pre class="usage"><span class='fu'>plug_formula</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>formula</span>, <span class='va'>...</span>, blueprint <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='fu'>drop_formula</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='fu'>replace_formula</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>formula</span>, <span class='va'>...</span>, blueprint <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A tidyflow</p></td>
    </tr>
    <tr>
      <th>formula</th>
      <td><p>A formula specifying the terms of the model. It is advised to
not do preprocessing in the formula, and instead use a recipe if that is
required.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Not used.</p></td>
    </tr>
    <tr>
      <th>blueprint</th>
      <td><p>A hardhat blueprint used for fine tuning the preprocessing.
If <code>NULL</code>, <code><a href='https://rdrr.io/pkg/hardhat/man/default_formula_blueprint.html'>hardhat::default_formula_blueprint()</a></code> is used.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The tidyflow <code>x</code>, updated with either a new or removed formula preprocessor.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>To fit a tidyflow, one of <code>plug_formula()</code> or <code><a href='plug_recipe.html'>plug_recipe()</a></code> <em>must</em> be
specified, but not both.</p>
<p>By default <code>tidyflow</code> leaves <code>workflows</code> to figure out which
type of factor/character transformation to happen (either leave factor as is,
transform to N-1 dummies or use a one-hot encoding approach of N dummy columns).
These transformations depend on the specific model supplied in <code>plug_model</code>.
See <code><a href='https://workflows.tidymodels.org//reference/add_formula.html'>add_formula</a></code> for more details on how transformations
are handled.</p>
<p>However, <code>plug_formula</code> allows to override the type of transformation
using the blueprint. For example, by passing
<code>default_formula_blueprint(intercept = TRUE, indicators = "none")</code> to
the blueprint argument of <code>plug_formula</code> you can
enforce that all factors/characters area left without transforming. You can also use
<code>default_formula_blueprint(intercept = TRUE, indicators = "traditional")</code> and
<code>default_formula_blueprint(intercept = TRUE, indicators = "one_hot")</code> to
transform all factors/characters to N-1 dummies or N dummies respectively.</p>
<p>For example, to transform all factors/characters to one-hot encoding, you can pass
the blueprint to <code>plug_formula</code>:<div class="r"></p><pre><span class='va'>bp</span> <span class='op'>&lt;-</span> <span class='fu'>default_formula_blueprint</span><span class='op'>(</span>intercept <span class='op'>=</span> <span class='cn'>TRUE</span>, indicators <span class='op'>=</span> <span class='st'>"one_hot"</span><span class='op'>)</span>
<span class='va'>iris</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='tidyflow.html'>tidyflow</a></span><span class='op'>(</span>seed <span class='op'>=</span> <span class='fl'>21315</span><span class='op'>)</span>
  <span class='fu'>plug_formula</span><span class='op'>(</span><span class='va'>Sepal.Length</span> <span class='op'>~</span> <span class='va'>Species</span>, blueprint <span class='op'>=</span> <span class='va'>bp</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='plug_model.html'>plug_model</a></span><span class='op'>(</span><span class='fu'><a href='https://parsnip.tidymodels.org/reference/set_engine.html'>set_engine</a></span><span class='op'>(</span><span class='fu'>parsnip</span><span class='fu'>::</span><span class='fu'><a href='https://parsnip.tidymodels.org/reference/linear_reg.html'>linear_reg</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='st'>"lm"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://generics.r-lib.org/reference/fit.html'>fit</a></span><span class='op'>(</span><span class='op'>)</span>
</pre><p></div></p>
<p>For custom transformations between types (for example, applying one-hot on
factors and not on characters), the user can provide a <code><a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe</a></code>
with a <code><a href='https://recipes.tidymodels.org/reference/step_dummy.html'>step_dummy</a></code> step to <code><a href='plug_recipe.html'>plug_recipe</a></code>. See
<a href='https://recipes.tidymodels.org/articles/Dummies.html'>this vignette</a>
for more details</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># Just for the pipe: %&gt;%</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tibble.tidyverse.org/'>tibble</a></span><span class='op'>)</span>

<span class='va'>tflow</span> <span class='op'>&lt;-</span>
  <span class='va'>mtcars</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='tidyflow.html'>tidyflow</a></span><span class='op'>(</span>seed <span class='op'>=</span> <span class='fl'>652341</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>plug_formula</span><span class='op'>(</span><span class='va'>mpg</span> <span class='op'>~</span> <span class='va'>.</span><span class='op'>)</span>

<span class='va'>tflow</span>
</div><div class='output co'>#&gt; ══ Tidyflow ════════════════════════════════════════════════════════════════════
#&gt; <span style='font-style: italic;'>Data:</span><span> 32 rows x 11 columns
#&gt; </span><span style='font-style: italic;'>Split:</span><span> None
#&gt; </span><span style='font-style: italic;'>Formula: </span><span>mpg ~ .
#&gt; </span><span style='font-style: italic;'>Resample:</span><span> None
#&gt; </span><span style='font-style: italic;'>Grid:</span><span> None
#&gt; </span><span style='font-style: italic;'>Model: None</span><span></div><div class='input'>
<span class='fu'>drop_formula</span><span class='op'>(</span><span class='va'>tflow</span><span class='op'>)</span>
</div><div class='output co'>#&gt; ══ Tidyflow ════════════════════════════════════════════════════════════════════
#&gt; </span><span style='font-style: italic;'>Data:</span><span> 32 rows x 11 columns
#&gt; </span><span style='font-style: italic;'>Split:</span><span> None
#&gt; </span><span style='font-style: italic;'>Recipe/Formula: None</span><span>
#&gt; </span><span style='font-style: italic;'>Resample:</span><span> None
#&gt; </span><span style='font-style: italic;'>Grid:</span><span> None
#&gt; </span><span style='font-style: italic;'>Model: None</span><span></div><div class='input'>
<span class='fu'>replace_formula</span><span class='op'>(</span><span class='va'>tflow</span>, <span class='va'>mpg</span> <span class='op'>~</span> <span class='va'>disp</span><span class='op'>)</span>
</div><div class='output co'>#&gt; ══ Tidyflow ════════════════════════════════════════════════════════════════════
#&gt; </span><span style='font-style: italic;'>Data:</span><span> 32 rows x 11 columns
#&gt; </span><span style='font-style: italic;'>Split:</span><span> None
#&gt; </span><span style='font-style: italic;'>Formula: </span><span>mpg ~ disp
#&gt; </span><span style='font-style: italic;'>Resample:</span><span> None
#&gt; </span><span style='font-style: italic;'>Grid:</span><span> None
#&gt; </span><span style='font-style: italic;'>Model: None</span><span></div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://cimentadaj.github.io'>Jorge Cimentada</a>, Davis Vaughan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


